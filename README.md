# Big Data Final Project
## Information
* Final Presentation: https://docs.google.com/presentation/d/1m_tigPLDeL2n93AdaH7c5hnxqnstjfbmLQA2UORtOUE/edit?usp=sharing
* Final Report: https://docs.google.com/document/d/1xd2uR9JFl2KIIEGgRrXVmcZqiCXFtd-EOVk177g4j3o/edit?usp=sharing

### Training / Testing Data
* `~2018` for training, `2019` for testing
### Data for Building the Prediction Models
* 市場：`台北一`
* 作物種類
```
香蕉, 洋香瓜-網狀紅肉, 蓮霧-紅蓮霧, 鳳梨-金鑽鳳梨, 南瓜-木瓜形, 大蒜-蒜仁, 青蔥-日蔥, 小白菜-土白菜, 芽菜類-黃豆牙, 木瓜-網室紅肉
```

* 天氣測站
```
新北(坪林)、桃園(觀音)、新竹(竹東)、苗栗(苗栗)、台中(台中)、彰化(溪湖)、南投(中寮)、雲林(草嶺)、嘉義(嘉義)、台南(永康)、高雄(高雄)、屏東(恆春)、宜蘭(宜蘭)、花蓮(玉里)、台東(台東)
```
* 天氣資訊：`氣壓、氣溫、風速、最大陣風、降水量、颱風強度、警報發布次數`


## Error Rate (MSE)
* price


| Model |香蕉 |洋香瓜 |蓮霧 |鳳梨 |南瓜 |大蒜 |青蔥 |小白菜 |芽菜類 |木瓜 |
| --------- | --------- | --------- | --------- | --------- | --------- | --------- | --------- | --------- | --------- | --------- |
| LSTM-1layer | 0.011 | 0.024 | 0.021 | 0.018 | 0.012 | 0.004 | 0.008 | 0.017 | 0.007 | 0.016 |
| LSTM-w/o-fs | 0.301 | 0.019 | 0.028 | 0.032 | 0.140 | 0.559 | 0.087 | 0.050 | 0.057 | 0.048 |
| LSTM-w/-fs  | 0.158 | 0.017 | 0.018 | 0.049 | 0.058 | 0.503 | 0.094 | 0.041 | 0.344 | 0.086 |
| ARIMA       | 0.005 | 0.019 | 0.011 | 0.014 | 0.009 | 0.002 | 0.011 | 0.018 | 0.009 | 0.024 |
| Prophet     | 0.108 | 0.022 | 0.018 | 0.075 | 0.050 | 1.081 | 0.109 | 0.037 | 0.117 | 0.197 |



* 3_day_return


| Model |香蕉 |洋香瓜 |蓮霧 |鳳梨 |南瓜 |大蒜 |青蔥 |小白菜 |芽菜類 |木瓜 |
| --------- | --------- | --------- | --------- | --------- | --------- | --------- | --------- | --------- | --------- | --------- |
| LSTM-1layer | 0.048 | 0.040 | 0.047 | 0.054 | 0.017 | 0.028 | 0.061 | 0.061 | 0.040 | 0.045 |
| LSTM-w/o-fs | 0.017 | 0.015 | 0.013 | 0.016 | 0.008 | 0.007 | 0.011 | 0.013 | 0.059 | 0.008 |
| LSTM-w/-fs  | 0.012 | 0.038 | 0.014 | 0.007 | 0.007 | 0.006 | 0.010 | 0.014 | 0.009 | 0.024 |
| ARIMA       | 0.026 | 0.021 | 0.018 | 0.021 | 0.013 | 0.006 | 0.014 | 0.023 | 0.005 | 0.014 |
| Prophet     | 0.028 | 0.024 | 0.019 | 0.021 | 0.014 | 0.010 | 0.017 | 0.026 | 0.017 | 0.017 |


## The difference of return prediction

  ```
  * 漲跌幅度的誤差:
  |ground truth - prediction| / total_day
  ```
* Price

| Model |香蕉 |洋香瓜 |蓮霧 |鳳梨 |南瓜 |大蒜 |青蔥 |小白菜 |芽菜類 |木瓜 |
| ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- |
| LSTM-1layer | 1.79% | 7.39% | 13.92% | 3.61% | 2.20% | 2.89% | 22.11% | 5.27% | 0.07% | 3.51% |
| LSTM-w/o-fs | 9.83% | 6.96% | 18.55% | 4.83% | 7.86% | 36.54% | 70.37% | 9.28% | 0.24% | 6.44% |
| LSTM-w/-fs  | 6.51% | 6.60% | 14.42% | 6.04% | 5.09% | 35.92% | 79.60% | 8.03% | 0.71% | 8.99% |
| ARIMA       | 1.30% | 6.39% | 10.10% | 3.11% | 2.00% | 1.34% | 22.29% | 5.71% | 0.10% | 4.25% |
| prophet     | 6.22% | 7.22% | 15.71% | 7.76% | 5.39% | 53.18% | 95.36% | 7.27% | 0.40% | 14.40% |



* 3_day_return

| Model |香蕉 |洋香瓜 |蓮霧 |鳳梨 |南瓜 |大蒜 |青蔥 |小白菜 |芽菜類 |木瓜 |
| ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- | ---------- |
| LSTM-1layer | 10.89% | 21.18% | 19.12% | 18.20% | 11.61% | 4.52% | 28.62% | 33.85% | 1.13% | 25.78% |
| LSTM-w/o-fs | 6.30% | 13.62% | 10.68% | 10.16% | 8.11% | 1.85% | 12.82% | 15.94% | 1.41% | 10.82% |
| LSTM-w/-fs  | 5.51% | 19.62% | 10.79% | 6.73% | 7.82% | 1.59% | 12.61% | 15.42% | 0.51% | 17.56% |
| ARIMA       | 7.76% | 15.92% | 12.43% | 11.65% | 10.41% | 1.31% | 13.98% | 21.43% | 0.41% | 13.41% |
| prophet     | 8.10% | 17.35% | 12.34% | 11.57% | 10.46% | 1.79% | 15.21% | 22.91% | 0.76% | 15.15% |

